// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ovp.cards.AnnotationHelper");sap.ovp.cards.AnnotationHelper={};sap.ovp.cards.AnnotationHelper.formatFunctions={count:0};sap.ovp.cards.AnnotationHelper.NumberFormatFunctions={};sap.ovp.cards.AnnotationHelper.criticalityConstants={StateValues:{None:"None",Negative:"Error",Critical:"Warning",Positive:"Success"},ColorValues:{None:"Neutral",Negative:"Error",Critical:"Critical",Positive:"Good"}};function g(i,a){if(i.getSetting){var b=i.getSetting("_ovpCache");return b[a];}return undefined;}function s(i,a,V){if(i.getSetting){var b=i.getSetting("_ovpCache");b[a]=V;}}function c(a,b){var S=b.None;if(a&&a.EnumMember){var i=a.EnumMember;if(e(i,'Negative')){S=b.Negative;}else if(e(i,'Critical')){S=b.Critical;}else if(e(i,'Positive')){S=b.Positive;}}return S;}function e(S,a){return S.indexOf(a,S.length-a.length)!==-1;}function d(a,b){return function(i){i=Number(i);var j=a.ImprovementDirection.EnumMember;var N={};var O=D(a.DeviationRangeLowValue);var P=D(a.DeviationRangeHighValue);var Q=D(a.ToleranceRangeLowValue);var R=D(a.ToleranceRangeHighValue);if(e(j,"Minimize")||e(j,"Minimizing")){if(i<=R){N.EnumMember="Positive";}else if(i>P){N.EnumMember="Negative";}else{N.EnumMember="Critical";}}else if(e(j,"Maximize")||e(j,"Maximizing")){if(i>=Q){N.EnumMember="Positive";}else if(i<O){N.EnumMember="Negative";}else{N.EnumMember="Critical";}}else if(e(j,"Target")){if(i>=Q&&i<=R){N.EnumMember="Positive";}else if(i<O||i>P){N.EnumMember="Negative";}else{N.EnumMember="Critical";}}return c(N,b);};}function f(i,a){var b=i.getPath()+"-DataFields-Sorted";var S=g(i,b);if(!S){var j=h(i,a);var N=j.map(function(O){return O.Value.Path;});S=a.filter(function(O){if(O.RecordType==="com.sap.vocabularies.UI.v1.DataField"&&N.indexOf(O.Value.Path)===-1){return true;}return false;});l(S);s(i,b,S);}return S;}function h(a,b){var j=a.getPath()+"-DataPoints-Sorted";var S=g(a,j);if(!S){S=b.filter(function(O){if(O.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&O.Target.AnnotationPath.match(/@com.sap.vocabularies.UI.v1.DataPoint.*/)){return true;}return false;});l(S);for(var i=0;i<S.length;i++){var T=S[i].Target.AnnotationPath.slice(1);var N=a.getPath().substr(0,a.getPath().lastIndexOf("/")+1);var P=N+T;S[i]=a.getModel().getProperty(P);}s(a,j,S);}return S;}function k(a){var i;if(a["com.sap.vocabularies.UI.v1.Importance"]){i=a["com.sap.vocabularies.UI.v1.Importance"].EnumMember;}return i;}function l(i){i.sort(function(a,b){var j=k(a),N=k(b);if(j===N){return 0;}if(j==="com.sap.vocabularies.UI.v1.ImportanceType/High"){return-1;}else if(N==="com.sap.vocabularies.UI.v1.ImportanceType/High"){return 1;}else if(j==="com.sap.vocabularies.UI.v1.ImportanceType/Medium"){return-1;}else if(N==="com.sap.vocabularies.UI.v1.ImportanceType/Medium"){return 1;}else if(j==="com.sap.vocabularies.UI.v1.ImportanceType/Low"){return-1;}else if(N==="com.sap.vocabularies.UI.v1.ImportanceType/Low"){return 1;}return-1;});return i;}function m(i,a,b){var j=f(i,a)[b];if(j){return q(i,j);}return"";}function n(i,a,b){var j=f(i,a)[b];if(j){return j.Label.String;}return"";}function o(i,a,b){var j=h(i,a)[b];if(j&&j.Title){return j.Title.String;}return"";}function p(i,a,b){var j=h(i,a)[b];if(!j){return"";}var N=i.getSetting('ovpCardProperties');var O=N.getProperty("/entityType");var P=N.getProperty("/metaModel");var Q=P.getODataProperty(O,j.Value.Path);if(Q&&Q["sap:text"]){Q=P.getODataProperty(O,Q["sap:text"]);j={Value:{Path:Q.name}};}return q(i,j);}function q(i,a,b,j){if(a.Value.Apply){return sap.ui.model.odata.AnnotationHelper.format(i,a.Value);}var N=i.getSetting('ovpCardProperties');var O=N.getProperty("/entityType");var P=N.getProperty("/metaModel");var Q=P.getODataProperty(O,a.Value.Path);var R="";var S;if(!j){if(a.Value.Path.split("/").length>1){Q=u(P,O,a.Value.Path);}if(!Q){return"";}if(a.ValueFormat&&a.ValueFormat.NumberOfFractionalDigits){S=r(a.ValueFormat.NumberOfFractionalDigits.Int);R="{path:'"+a.Value.Path+"', formatter: '"+S+"'}";}else if(Q["scale"]){S=r(Q["scale"]);R="{path:'"+Q.name+"', formatter: '"+S+"'}";}else{R=sap.ui.model.odata.AnnotationHelper.format(i,a.Value);}}if(!b){if(Q["Org.OData.Measures.V1.ISOCurrency"]){var T=Q["Org.OData.Measures.V1.ISOCurrency"];if(T.Path){R=R+" {path: '"+T.Path+"'}";}else if(T.String){R=R+" "+T.String;}}if(Q["Org.OData.Measures.V1.Unit"]){var U=Q["Org.OData.Measures.V1.Unit"];if(U.Path){R=R+" {path: '"+U.Path+"'}";}else if(U.String){R=R+" "+U.String;}}}if(R[0]===" "){R=R.substring(1);}return R;}function r(a){var b="formatNumberCalculation"+a;if(!sap.ovp.cards.AnnotationHelper.NumberFormatFunctions[b]){sap.ovp.cards.AnnotationHelper.NumberFormatFunctions[b]=t(Number(a));}return"sap.ovp.cards.AnnotationHelper.NumberFormatFunctions."+b;}function t(a){return function(b){var i=sap.ui.core.format.NumberFormat.getFloatInstance({style:'short',showMeasure:false,minFractionDigits:a,maxFractionDigits:a});return i.format(Number(b));};}function u(a,b,P){var j=P.split("/");if(j.length>1){for(var i=0;i<(j.length-1);i++){var N=a.getODataAssociationEnd(b,j[i]);if(N){b=a.getODataEntityType(N.type);}}return a.getODataProperty(b,j[j.length-1]);}}function v(i,a,b){var j=h(i,a);var S="None";if(j.length>b){var N=j[b];S=w(i,N,sap.ovp.cards.AnnotationHelper.criticalityConstants.StateValues);}return S;}function w(i,a,b){var S=b.None;if(a.Criticality){S=c(a.Criticality,b);}else if(a.CriticalityCalculation){var j=sap.ui.model.odata.AnnotationHelper.format(i,a.Value);var P=j.match(/path *: *'.*?',/g);if(P){var N=d(a.CriticalityCalculation,b);sap.ovp.cards.AnnotationHelper.formatFunctions.count++;var O="formatCriticalityCalculation"+sap.ovp.cards.AnnotationHelper.formatFunctions.count;sap.ovp.cards.AnnotationHelper.formatFunctions[O]=N;S="{"+P+" formatter: 'sap.ovp.cards.AnnotationHelper.formatFunctions."+O+"'}";}}return S;}function x(a,b,P){var j="";var N=P.split("/");if(N.length>1){for(var i=0;i<(N.length-1);i++){var O=a.getODataAssociationEnd(b,N[i]);if(O){b=a.getODataEntityType(O.type);if(j){j=j+"/";}j=j+N[i];}else{return j;}}}return j;}sap.ovp.cards.AnnotationHelper.formatItems=function(i,a){var b=i.getSetting('ovpCardProperties');var j=b.getProperty("/addODataSelect");var N=b.getProperty("/metaModel");var O=N.getODataEntityType(a.entityType);var S=O[b.getProperty('/selectionAnnotationPath')];var P=O[b.getProperty('/presentationAnnotationPath')];var Q="/"+a.name;var R=Array.prototype.slice.call(arguments,2);if(S){if(S&&S.Parameters){Q=sap.ovp.cards.AnnotationHelper.resolveParameterizedEntitySet(i.getSetting('dataModel'),a,S);}}var T="{path: '"+Q+"', length: "+F(b);var U=[];if(j){U=z(N,O,R);}var V=y(N,O,R);if(U.length>0||V.length>0){T=T+", parameters: {";if(U.length>0){T=T+"select: '"+U.join(',')+"'";}if(V.length>0){if(U.length>0){T=T+", ";}T=T+"expand: '"+V.join(',')+"'";}T=T+"}";}var W=A(b,P);if(W.length>0){T=T+", sorter:"+JSON.stringify(W);}var X=B(b,S);if(X.length>0){T=T+", filters:"+JSON.stringify(X);}T=T+"}";return T;};function y(a,b,N){var O=[];var P,Q,R,S;for(var i=0;i<N.length;i++){if(!N[i]){continue;}P=b.$path+"/"+N[i];Q=a.createBindingContext(P);R=Q.getObject();R=R?R:[];for(var j=0;j<R.length;j++){if(R[j].Value&&R[j].Value.Path){S=x(a,b,R[j].Value.Path);if(S&&O.indexOf(S)===-1){O.push(S);}}}}return O;}function z(a,b,N){var S=[];var O,P,Q;for(var i=0;i<N.length;i++){if(!N[i]){continue;}O=b.$path+"/"+N[i];P=a.createBindingContext(O);Q=P.getObject();Q=Q?Q:[];for(var j=0;j<Q.length;j++){if(Q[j].Value&&Q[j].Value.Path){S.push(Q[j].Value.Path);}}}return S;}function A(a,P){var S=[];var b,j;var N=a.getProperty("/sortBy");if(N){var O=a.getProperty('/sortOrder');if(O&&O.toLowerCase()!=='descending'){j=false;}else{j=true;}b={path:N,descending:j};S.push(b);}var Q=P&&P.SortOrder||undefined;var R,N;if(Q){for(var i=0;i<Q.length;i++){R=Q[i];N=R.Property.PropertyPath;j=C(R.Descending,true);b={path:N,descending:j};S.push(b);}}return S;}sap.ovp.cards.AnnotationHelper.getCardFilters=function(a){var b=a.getProperty('/entityType');var S=b[a.getProperty('/selectionAnnotationPath')];return B(a,S);};function B(a,S){var b=[];var N=a.getProperty("/filters");if(N){b=b.concat(N);}var O=S&&S.SelectOptions;var P,Q,R;if(O){for(var i=0;i<O.length;i++){P=O[i];Q=P.PropertyName.PropertyPath;for(var j=0;j<P.Ranges.length;j++){R=P.Ranges[j];if(R.Sign.EnumMember==="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I"){var T={path:Q,operator:R.Option.EnumMember.split("/")[1],value1:E(R.Low),value2:E(R.High)};b.push(T);}}}}return b;}function C(V,b){if(V&&V.Boolean){if(V.Boolean.toLowerCase()==="true"){return true;}else if(V.Boolean.toLowerCase()==="false"){return false;}}return b;}function D(V){var a;if(V){if(V.String){a=Number(V.String);}else if(V.Int){a=Number(V.Int);}else if(V.Decimal){a=Number(V.Decimal);}else if(V.Double){a=Number(V.Double);}else if(V.Single){a=Number(V.Single);}}return a;}function E(V){var a;if(V){if(V.String){a=V.String;}else if(V.Boolean){a=C(V);}else{a=D(V);}}return a;}var I={"List_condensed":{phone:5,tablet:5,desktop:5},"List_extended":{phone:3,tablet:3,desktop:3},"List_condensed_bar":{phone:5,tablet:5,desktop:5},"List_extended_bar":{phone:3,tablet:3,desktop:3},"Table":{phone:5,tablet:5,desktop:5},"Stack_simple":{phone:20,tablet:20,desktop:20},"Stack_complex":{phone:5,tablet:5,desktop:5}};function F(O){var a=O.getProperty('/contentFragment');var b=O.getProperty('/listType');var i=O.getProperty('/listFlavor');var j;var N="desktop";if(sap.ui.Device.system.phone){N="phone";}else if(sap.ui.Device.system.tablet){N="tablet";}if(a=="sap.ovp.cards.list.List"){if(b=="extended"){if(i=="bar"){j=I["List_extended_bar"];}else{j=I["List_extended"];}}else if(i=="bar"){j=I["List_condensed_bar"];}else{j=I["List_condensed"];}}else if(a=="sap.ovp.cards.table.Table"){j=I["Table"];}else if(a=="sap.ovp.cards.stack.Stack"){if(O.getProperty('/objectStreamCardsNavigationProperty')){j=I["Stack_complex"];}else{j=I["Stack_simple"];}}if(j){return j[N];}return 5;}sap.ovp.cards.AnnotationHelper.formatUrl=function(i,U){if(U.charAt(0)==='/'||U.indexOf("http")===0){return U;}var b=i.getModel().getProperty("/baseUrl");if(b){return b+"/"+U;}return U;};sap.ovp.cards.AnnotationHelper.getDataPointsCount=function(i,a){var b=h(i,a);return b.length;};sap.ovp.cards.AnnotationHelper.getFirstDataPointValue=function(i,a){return sap.ovp.cards.AnnotationHelper.getDataPointValue(i,a,0);};sap.ovp.cards.AnnotationHelper.getSecondDataPointValue=function(i,a){return sap.ovp.cards.AnnotationHelper.getDataPointValue(i,a,1);};sap.ovp.cards.AnnotationHelper.getDataPointValue=function(i,a,b){var j=h(i,a),N=j[b];if(N&&N.Value&&N.Value.Path){return N.Value.Path;}return"";};sap.ovp.cards.AnnotationHelper.getFirstDataFieldName=function(i,a){return n(i,a,0);};sap.ovp.cards.AnnotationHelper.getSecondDataFieldName=function(i,a){return n(i,a,1);};sap.ovp.cards.AnnotationHelper.getThirdDataFieldName=function(i,a){return n(i,a,2);};sap.ovp.cards.AnnotationHelper.formatFirstDataFieldValue=function(i,a){return m(i,a,0);};sap.ovp.cards.AnnotationHelper.formatSecondDataFieldValue=function(i,a){return m(i,a,1);};sap.ovp.cards.AnnotationHelper.formatThirdDataFieldValue=function(i,a){return m(i,a,2);};sap.ovp.cards.AnnotationHelper.formatFourthDataFieldValue=function(i,a){return m(i,a,3);};sap.ovp.cards.AnnotationHelper.formatFifthDataFieldValue=function(i,a){return m(i,a,4);};sap.ovp.cards.AnnotationHelper.formatSixthDataFieldValue=function(i,a){return m(i,a,5);};sap.ovp.cards.AnnotationHelper.getFirstDataPointName=function(i,a){return o(i,a,0);};sap.ovp.cards.AnnotationHelper.getSecondDataPointName=function(i,a){return o(i,a,1);};sap.ovp.cards.AnnotationHelper.getThirdDataPointName=function(i,a){return o(i,a,2);};sap.ovp.cards.AnnotationHelper.formatFirstDataPointValue=function(i,a){return p(i,a,0);};sap.ovp.cards.AnnotationHelper.formatSecondDataPointValue=function(i,a){return p(i,a,1);};sap.ovp.cards.AnnotationHelper.formatThirdDataPointValue=function(i,a){return p(i,a,2);};sap.ovp.cards.AnnotationHelper.formatFirstDataPointState=function(i,a){return v(i,a,0);};sap.ovp.cards.AnnotationHelper.formatSecondDataPointState=function(i,a){return v(i,a,1);};sap.ovp.cards.AnnotationHelper.formatThirdDataPointState=function(i,a){return v(i,a,2);};sap.ovp.cards.AnnotationHelper.formatKPIHeaderState=function(i,a){return w(i,a,sap.ovp.cards.AnnotationHelper.criticalityConstants.ColorValues);};sap.ovp.cards.AnnotationHelper.hasActions=function(a,b){var j;for(var i=0;i<b.length;i++){j=b[i];if(j.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"||j.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||j.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return 1;}}return 0;};sap.ovp.cards.AnnotationHelper.isFirstDataPointPercentageUnit=function(i,a){var b=h(i,a)[0];if(b&&b.Value&&b.Value.Path){var j=i.getPath().substr(0,i.getPath().lastIndexOf("/")+1);var N=i.getModel();var O=N.getProperty(j);var P=N.getODataProperty(O,b.Value.Path);if(P&&P["Org.OData.Measures.V1.Unit"]){return P["Org.OData.Measures.V1.Unit"].String==="%";}}return false;};sap.ovp.cards.AnnotationHelper.resolveEntityTypePath=function(a){var b=a.getObject();var i=a.getModel();var j=i.getProperty("/metaModel");var N=j.getODataEntitySet(i.getProperty("/entitySet"));var O=j.getODataEntityType(N.entityType);b=O.$path+"/"+b;return j.createBindingContext(b);};sap.ovp.cards.AnnotationHelper.resolveParameterizedEntitySet=function(a,b,S){jQuery.sap.require("sap.ui.model.analytics.odata4analytics");var i="";var j=new sap.ui.model.analytics.odata4analytics.Model(sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(a));var N=j.findQueryResultByName(b.name);var O=new sap.ui.model.analytics.odata4analytics.QueryResultRequest(N);var P=N.getParameterization();if(P){O.setParameterizationRequest(new sap.ui.model.analytics.odata4analytics.ParameterizationRequest(P));jQuery.each(S.Parameters,function(){if(this.RecordType==="com.sap.vocabularies.UI.v1.IntervalParameter"){O.getParameterizationRequest().setParameterValue(this.PropertyName.PropertyPath,this.PropertyValueFrom.String,this.PropertyValueTo.String);}else{O.getParameterizationRequest().setParameterValue(this.PropertyName.PropertyPath,this.PropertyValue.String);}});}try{i=O.getURIToQueryResultEntitySet();}catch(Q){N=O.getQueryResult();i="/"+N.getEntitySet().getQName();jQuery.sap.log.error("getEntitySetPathWithParameters","binding path with parameters failed - "+Q||Q.message);}return i;};sap.ovp.cards.AnnotationHelper.getAssociationObject=function(a,b,j){var N=a.getServiceMetadata().dataServices.schema[0].association;for(var i=0;i<N.length;i++){if(j+"."+N[i].name===b){return N[i];}}};sap.ovp.cards.AnnotationHelper.getAggregateNumber=function(i,a,b,S){var j=b.Value.Path;var N="";var P=S&&S.Parameters;var O="";if(P){var Q=i.getSetting("dataModel");var R=sap.ovp.cards.AnnotationHelper.resolveParameterizedEntitySet(Q,a,S);N+="{path: '"+R+"'";}else{N+="{path: '/"+a.name+"'";}N+=", length: 1";var T=i.getSetting('ovpCardProperties');var U=T.getProperty("/entityType");var V=J(j,U);var W=B(T,S);if(W.length>0){O+=", filters: "+JSON.stringify(W);}var X=[];X.push(j);if(V){X.push(V);}if(b.TrendCalculation&&b.TrendCalculation.ReferenceValue&&b.TrendCalculation.ReferenceValue.Path){X.push(b.TrendCalculation.ReferenceValue.Path);}return N+", parameters:{select:'"+X.join(",")+"'}"+O+"}";};sap.ovp.cards.AnnotationHelper.formThePathForAggregateNumber=function(i,a){if(!a||!a.Value||!a.Value.Path){return"";}return q(i,a,true,false);};sap.ovp.cards.AnnotationHelper.formThePathForTrendIcon=function(a){if(!a||!a.Value||!a.Value.Path||!a.TrendCalculation){return"";}if(a.TrendCalculation&&a.TrendCalculation.ReferenceValue&&a.TrendCalculation.ReferenceValue.Path){return"{parts: [{path:'"+a.Value.Path+"'}, {path:'"+a.TrendCalculation.ReferenceValue.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.returnTrendDirection'}";}else{return"{parts: [{path:'"+a.Value.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.returnTrendDirection'}";}};sap.ovp.cards.AnnotationHelper.returnTrendDirection=function(a,b){a=Number(a);var i=this.getModel("ovpCardProperties");if(!i){return;}var j=i.getProperty("/dataPointAnnotationPath");var N=i.getProperty("/entityType")[j];var O,P,Q;if(N.TrendCalculation.ReferenceValue){if(N.TrendCalculation.ReferenceValue.Path){O=Number(b);}else{O=D(N.TrendCalculation.ReferenceValue);}}if(N.TrendCalculation.UpDifference){P=D(N.TrendCalculation.UpDifference);}if(N.TrendCalculation.DownDifference){Q=D(N.TrendCalculation.DownDifference);}if(!N.TrendCalculation.UpDifference&&(a-O>=0)){return"Up";}if(!N.TrendCalculation.DownDifference&&(a-O<=0)){return"Down";}if(O&&P&&(a-O>=P)){return"Up";}if(O&&Q&&(a-O<=Q)){return"Down";}};sap.ovp.cards.AnnotationHelper.formThePathForUOM=function(i,a){if(!a||!a.Value||!a.Value.Path){return"";}return q(i,a,false,true);};sap.ovp.cards.AnnotationHelper.formPathForPercentageChange=function(a){if(!a||!a.TrendCalculation||!a.TrendCalculation.ReferenceValue){return"";}if(a.TrendCalculation.ReferenceValue.Path){return"{parts: [{path:'"+a.Value.Path+"'}, {path:'"+a.TrendCalculation.ReferenceValue.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.returnPercentageChange'}";}else{return"{parts: [{path:'"+a.Value.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.returnPercentageChange'}";}};sap.ovp.cards.AnnotationHelper.returnPercentageChange=function(a,b){var i="";a=Number(a);var j=this.getModel("ovpCardProperties");if(!j){return i;}var N=j.getProperty("/dataPointAnnotationPath");var O=j.getProperty("/entityType")[N];var P;if(!O.TrendCalculation){return i;}if(O.TrendCalculation.ReferenceValue){if(O.TrendCalculation.ReferenceValue.String){P=Number(O.TrendCalculation.ReferenceValue.String);}if(O.TrendCalculation.ReferenceValue.Path){P=Number(b);}if(!P||P==0){return i;}var Q=((Number(a)-P)/P);var R=sap.ui.core.format.NumberFormat.getPercentInstance({style:'short',minFractionDigits:2,maxFractionDigits:2});if(Q>0){i="+"+R.format(Q);return i;}return R.format(Q);}};sap.ovp.cards.AnnotationHelper.listGroupBy=function(P){var a="";var b=P&&P.GroupBy;if(!b){return a;}var i=this.getModel('ovpCardProperties').getProperty("/metaModel");var j=this.getModel('ovpCardProperties').getProperty("/entityType");var N;if(P.GroupBy.constructor===Array){N=P.GroupBy;}else if(!P.GroupBy.Collection){return a;}else{N=P.GroupBy.Collection;}var O;jQuery.each(N,function(){O=K(i,j,this.PropertyPath);if(!O){return;}a+=O;a+=", ";});if(a[a.length-1]===" "&&a[a.length-2]===","){a=a.substring(0,a.length-2);}return a==""?"":sap.ui.getCore().getLibraryResourceBundle("sap.ovp").getText("By",[a]);};sap.ovp.cards.AnnotationHelper.formTheFilterByString=function(a,S){var b=a.getSetting('ovpCardProperties');var N=b.getProperty("/entityType");var O=b.getProperty("/metaModel");var P=B(b,S);var Q;var T;for(var i=0;i<P.length;i++){Q=P[i].path;T=L(O,N,Q);if(T!==Q){for(var j=0;j<P.length;j++){if((P[j].path==T)){P.splice(i,1);break;}}}}return G(P);};function G(a){var b=[];for(var i=0;i<a.length;i++){b.push(H(a[i]));}return b.join(', ');}function H(a){var N=false;var b=a.value1;if(a.operator[0]==="N"){N=true;}if(a.value2){b+=" - "+a.value2;}if(N){b=sap.ui.getCore().getLibraryResourceBundle("sap.ovp").getText("kpiHeader_Filter_NotOperator",[b]);}return b;}function J(a,b){var j=b.property;for(var i=0,N=j.length;i<N;i++){if(j[i].name==a){if(j[i].hasOwnProperty("sap:unit")){return j[i]["sap:unit"];}break;}}return null;}function K(a,b,P){return M(a,b,P,"com.sap.vocabularies.Common.v1.Label");}function L(a,b,P){return M(a,b,P,"sap:text");}function M(a,b,P,i){var j=a.getODataProperty(b,P);if(!j){jQuery.sap.log.error("No Property Found for with Name '"+P+" For Entity-Type '"+b.name+"'");return;}var N=j[i];if(N){if(i==="com.sap.vocabularies.Common.v1.Label"){return N.String;}return N;}return j.name;}sap.ovp.cards.AnnotationHelper._criticality2state=c;sap.ovp.cards.AnnotationHelper._generateCriticalityCalculationStateFunction=d;sap.ovp.cards.AnnotationHelper.formThePathForAggregateNumber.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formThePathForUOM.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formTheFilterByString.requiresIContext=true;sap.ovp.cards.AnnotationHelper.getAggregateNumber.requiresIContext=true;sap.ovp.cards.AnnotationHelper.getFirstDataFieldName.requiresIContext=true;sap.ovp.cards.AnnotationHelper.getSecondDataFieldName.requiresIContext=true;sap.ovp.cards.AnnotationHelper.getThirdDataFieldName.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatFirstDataFieldValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatSecondDataFieldValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatThirdDataFieldValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatFourthDataFieldValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatFifthDataFieldValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatSixthDataFieldValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.getDataPointsCount.requiresIContext=true;sap.ovp.cards.AnnotationHelper.getFirstDataPointName.requiresIContext=true;sap.ovp.cards.AnnotationHelper.getSecondDataPointName.requiresIContext=true;sap.ovp.cards.AnnotationHelper.getThirdDataPointName.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatFirstDataPointValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatSecondDataPointValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatThirdDataPointValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatFirstDataPointState.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatSecondDataPointState.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatThirdDataPointState.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatKPIHeaderState.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatItems.requiresIContext=true;sap.ovp.cards.AnnotationHelper.formatUrl.requiresIContext=true;sap.ovp.cards.AnnotationHelper.hasActions.requiresIContext=true;sap.ovp.cards.AnnotationHelper.getFirstDataPointValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.getSecondDataPointValue.requiresIContext=true;sap.ovp.cards.AnnotationHelper.isFirstDataPointPercentageUnit.requiresIContext=true;}());
