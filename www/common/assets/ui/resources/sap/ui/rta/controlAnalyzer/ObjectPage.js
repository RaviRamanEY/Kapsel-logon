/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2016 SAP SE. All rights reserved
 */
sap.ui.define(['sap/ui/rta/controlAnalyzer/Base','sap/ui/rta/Utils','sap/ui/dt/ElementUtil'],function(B,U,E){"use strict";var O=B.extend("sap.ui.rta.controlAnalyzer.ObjectPage",{metadata:{library:"sap.ui.rta",properties:{}}});O.prototype.init=function(){};O.prototype.getSelectedBlock=function(c){return U.findSupportedBlock(c,["sap.uxap.ObjectPageSection"]);};O.prototype.getClosestType=function(c){return U.getClosestTypeForControl(c,"sap.uxap.ObjectPageLayout");};O.prototype.getControlsFieldCollection=function(c){throw new Error('getControlsFieldCollection not yet implemented in ObjectPage');};O.prototype.createChangeData=function(c,C,h){var m={};var b=c.getBindingContext().getObject();var s=b.controlId?b.controlId:b.fieldLabel;var o=sap.ui.getCore().byId(s);var a=!!o;var f=function(){if(a){m={controlId:s,changeType:h?"hideControl":"unhideControl"};}return m;};return new Promise(function(r,d){r(f());});};O.prototype.findVisibleAndBoundFieldsAndLabelNames=function(c){var v=[];var f={};var F={};var e=E.findAllPublicElements(c);var i=0;for(i=0;i<e.length;i++){var o=e[i];if(o instanceof sap.m.ObjectAttribute){v.push(o.getBindingPath("text"));}}return{visibleAndBoundFields:v,fieldsAndLabelNames:f,fieldsAndBoundPropertyName:F};};O.prototype.getCustomizeControlModel=function(c,f){var s=U.getObjectPageSections(c);var S=[];if(!f){return Promise.resolve(s);}else{for(var i=0;i<s.length;i++){if(s[i].getVisible()===false){S.push({fieldLabel:s[i].getTitle(),quickInfo:s[i].getTitle(),entityType:"",controlId:s[i].getId()});}}return Promise.resolve(S);}};O.prototype.checkTargetZone=function(p,a,m){if(E.isInstanceOf(m,"sap.uxap.ObjectPageSection")){if(E.isInstanceOf(p,"sap.uxap.ObjectPageLayout")){if(m.getParent()===p&&a==="sections"){return true;}}}};return O;},true);
