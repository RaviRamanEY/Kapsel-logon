/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2016 SAP SE. All rights reserved
 */
sap.ui.define(['jquery.sap.global','sap/viz/ui5/format/ChartFormatter','sap/ui/core/library','sap/viz/library','sap/chart/utils/RoleFitter'],function(q,C,c,v,R){"use strict";sap.ui.getCore().initLibrary({name:"sap.chart",dependencies:["sap.ui.core","sap.viz"],types:[],interfaces:[],controls:["sap.chart.Chart"],elements:["sap.chart.data.Dimension","sap.chart.data.Measure"],version:"1.36.0"});sap.chart.ChartType={Bar:"bar",Column:"column",Line:"line",Combination:"combination",Pie:"pie",Donut:"donut",Scatter:"scatter",Bubble:"bubble",Heatmap:"heatmap",Bullet:"bullet",VerticalBullet:"vertical_bullet",StackedBar:"stacked_bar",StackedColumn:"stacked_column",StackedCombination:"stacked_combination",HorizontalStackedCombination:"horizontal_stacked_combination",DualBar:"dual_bar",DualColumn:"dual_column",DualLine:"dual_line",DualStackedBar:"dual_stacked_bar",DualStackedColumn:"dual_stacked_column",DualStackedCombination:"dual_stacked_combination",DualHorizontalStackedCombination:"dual_horizontal_stacked_combination",PercentageStackedBar:"100_stacked_bar",PercentageStackedColumn:"100_stacked_column",PercentageDualStackedBar:"100_dual_stacked_bar",PercentageDualStackedColumn:"100_dual_stacked_column",Waterfall:"waterfall",HorizontalWaterfall:"horizontal_waterfall"};sap.chart.SelectionMode={Multi:"MULTIPLE",Single:"SINGLE",None:"NONE"};sap.chart.api={};sap.chart.api.getChartTypes=function(){var p=q.sap.getModulePath("sap.chart");var B=q.sap.resources({url:p+"/i18n/i18n.properties"});return Object.keys(sap.chart.ChartType).reduce(function(m,s){var d=sap.chart.ChartType[s];m[d]=B.getText("info/"+d);return m;},{});};sap.chart.api.getChartTypeLayout=function(s,d,m){var D=this._mDataTypes,e,M;if(!s){throw new Error("Invalid chart type: "+String(s));}if(d){e=d.map(function(f,i){if(f&&f.name){return{getName:function(){return f.name;},getRole:function(){return f.role||"category";}};}else{throw new Error("Invalid Dimension at ["+i+"]: "+String(f)+". Dimension should be an object of the format{name:'name'}.");}});}else{e=[];}if(m){M=m.map(function(f,i){if(f&&f.name){return{getName:function(){return f.name;},getRole:function(){return f.role||"category";}};}else{throw new Error("Invalid Measure at ["+i+"]: "+String(f)+". Measure should be an object of the format{name:'name'}.");}});}else{M=[];}var o=R.compatible(s,e,M,D);return{dimensions:o.used.Dimension||[],measures:o.used.Measure||[],errors:Object.keys(o.error||{}).reduce(function(E,f){return E.concat({cause:f,detail:o.error[f]});},[])};};var F="__UI5__ShortIntegerMaxFraction10";var a="__UI5__FloatMaxFraction2";var b="__UI5__ShortIntegerMaxFraction2";function W(){var d=C.getInstance();d.registerCustomFormatter(F,function(e){var f=sap.ui.core.format.NumberFormat.getIntegerInstance({style:"short",maxFractionDigits:10});return f.format(e);});d.registerCustomFormatter(a,function(e){var f=sap.ui.core.format.NumberFormat.getFloatInstance({style:'Standard',maxFractionDigits:2});return f.format(e);});d.registerCustomFormatter(b,function(e){var f=sap.ui.core.format.NumberFormat.getIntegerInstance({style:"short",maxFractionDigits:2});return f.format(e);});this._oChartForamtter=d;}W.prototype.extractPattern=/(\${([^${}]*)})/;W.prototype.format=function(V,p){var P=this.extractPattern.exec(p);if(P){var s=p.substr(0,P.index),S=p.substr(P.index+P[1].length),f=this._oChartForamtter.format.call(this._oChartForamtter,V,P[2]);return s+f+S;}else{return this._oChartForamtter.format.call(this._oChartForamtter,V,p);}};W.prototype.stripUnit=function(p){var P=this.extractPattern.exec(p);return P?P[2]:p;};W.prototype.applyUnit=function(p,u){var r=this.stripUnit(p);return["${"+(r||"")+"}"].concat(u||[]).join(" ");};if(!(sap.viz.api.env.Format.numericFormatter()instanceof W)){sap.viz.api.env.Format.numericFormatter(new W());}return sap.chart;});
